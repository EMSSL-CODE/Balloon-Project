<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GPS Datalogger For Adalogger M0: FeatherM0_gps_2_sd_node/FeatherM0_gps_2_sd_node.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="g4b9o.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GPS Datalogger For Adalogger M0
   </div>
   <div id="projectbrief">Part of the EMSSL Balloon Project Software Suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_544bbec3c5aed0b28318ff88a1799ab0.html">FeatherM0_gps_2_sd_node</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">FeatherM0_gps_2_sd_node.ino File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A barebones NMEA sentence datalogger build for the Adafruit Feather Adalogger Cortex-M0.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;pt.h&gt;</code><br />
<code>#include &lt;SD.h&gt;</code><br />
<code>#include &lt;Adafruit_Sensor.h&gt;</code><br />
<code>#include &lt;Adafruit_GPS.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a55319a97d01bdc1aec67578a00a99273"><td class="memItemLeft" align="right" valign="top"><a id="a55319a97d01bdc1aec67578a00a99273"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>usb</b>&#160;&#160;&#160;Serial</td></tr>
<tr class="separator:a55319a97d01bdc1aec67578a00a99273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd0b8f6df1e7d23c52ba35af7126fc9c"><td class="memItemLeft" align="right" valign="top"><a id="afd0b8f6df1e7d23c52ba35af7126fc9c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>gps</b>&#160;&#160;&#160;Serial1</td></tr>
<tr class="separator:afd0b8f6df1e7d23c52ba35af7126fc9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e2d8ef8f0724f23ce84b1e7d0c171d9"><td class="memItemLeft" align="right" valign="top"><a id="a7e2d8ef8f0724f23ce84b1e7d0c171d9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SD_CS</b>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a7e2d8ef8f0724f23ce84b1e7d0c171d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64d5ed76daae4cc9cd2af23cee4da1c5"><td class="memItemLeft" align="right" valign="top"><a id="a64d5ed76daae4cc9cd2af23cee4da1c5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>gpsWriteThresh</b>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a64d5ed76daae4cc9cd2af23cee4da1c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17595c9fe0c65060057bb29ef5dfbfa5"><td class="memItemLeft" align="right" valign="top"><a id="a17595c9fe0c65060057bb29ef5dfbfa5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>GPSECHO</b>&#160;&#160;&#160;false</td></tr>
<tr class="separator:a17595c9fe0c65060057bb29ef5dfbfa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a754d3abd9597e517b16306ed62bcea58"><td class="memItemLeft" align="right" valign="top"><a id="a754d3abd9597e517b16306ed62bcea58"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>useInterrupt</b> (boolean)</td></tr>
<tr class="separator:a754d3abd9597e517b16306ed62bcea58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3f20a5a4f45810cd3223e55574a3bae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_feather_m0__gps__2__sd__node_8ino.html#ae3f20a5a4f45810cd3223e55574a3bae">getGPS</a> ()</td></tr>
<tr class="memdesc:ae3f20a5a4f45810cd3223e55574a3bae"><td class="mdescLeft">&#160;</td><td class="mdescRight">The function that grabs new GPS sentences.  <a href="_feather_m0__gps__2__sd__node_8ino.html#ae3f20a5a4f45810cd3223e55574a3bae">More...</a><br /></td></tr>
<tr class="separator:ae3f20a5a4f45810cd3223e55574a3bae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7b58bc5521481efa29c71f98a6d5d2e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_feather_m0__gps__2__sd__node_8ino.html#ac7b58bc5521481efa29c71f98a6d5d2e">makeFiles</a> ()</td></tr>
<tr class="memdesc:ac7b58bc5521481efa29c71f98a6d5d2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds unique filenames on the SD card and opens/assigns them to global File declarations.  <a href="_feather_m0__gps__2__sd__node_8ino.html#ac7b58bc5521481efa29c71f98a6d5d2e">More...</a><br /></td></tr>
<tr class="separator:ac7b58bc5521481efa29c71f98a6d5d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6745f86d1460523cfe60e6c4dd169448"><td class="memItemLeft" align="right" valign="top"><a id="a6745f86d1460523cfe60e6c4dd169448"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>serialEventRun</b> ()</td></tr>
<tr class="separator:a6745f86d1460523cfe60e6c4dd169448"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acc2c364d8f672214841288412403b779"><td class="memItemLeft" align="right" valign="top"><a id="acc2c364d8f672214841288412403b779"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>gpsTimeStamp</b> = 0</td></tr>
<tr class="separator:acc2c364d8f672214841288412403b779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d437c0e6b088c8249e8fc523b84a03f"><td class="memItemLeft" align="right" valign="top"><a id="a0d437c0e6b088c8249e8fc523b84a03f"></a>
String&#160;</td><td class="memItemRight" valign="bottom"><b>gpsStuff</b> = &quot;&quot;</td></tr>
<tr class="separator:a0d437c0e6b088c8249e8fc523b84a03f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49f9cba61117124faf4f801f064cab43"><td class="memItemLeft" align="right" valign="top"><a id="a49f9cba61117124faf4f801f064cab43"></a>
String&#160;</td><td class="memItemRight" valign="bottom"><b>GPSflushTotal</b> = &quot;&quot;</td></tr>
<tr class="separator:a49f9cba61117124faf4f801f064cab43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeae894d76ee26bb24c0961def82625b0"><td class="memItemLeft" align="right" valign="top"><a id="aeae894d76ee26bb24c0961def82625b0"></a>
File&#160;</td><td class="memItemRight" valign="bottom"><b>GPSdata</b></td></tr>
<tr class="separator:aeae894d76ee26bb24c0961def82625b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac29b14803acec0f696b6ed51c1e227a3"><td class="memItemLeft" align="right" valign="top"><a id="ac29b14803acec0f696b6ed51c1e227a3"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>GPSwriteCount</b> = 0</td></tr>
<tr class="separator:ac29b14803acec0f696b6ed51c1e227a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eea268f79912446e3fa269c256ef025"><td class="memItemLeft" align="right" valign="top"><a id="a6eea268f79912446e3fa269c256ef025"></a>
Adafruit_GPS GPS &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>gps</b></td></tr>
<tr class="separator:a6eea268f79912446e3fa269c256ef025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff2883e8ec712eae433249c05acc02d7"><td class="memItemLeft" align="right" valign="top"><a id="aff2883e8ec712eae433249c05acc02d7"></a>
boolean&#160;</td><td class="memItemRight" valign="bottom"><b>usingInterrupt</b> = false</td></tr>
<tr class="separator:aff2883e8ec712eae433249c05acc02d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc6a08d1c4611535bc9527c8e2d4f75c"><td class="memItemLeft" align="right" valign="top"><a id="adc6a08d1c4611535bc9527c8e2d4f75c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>gpsError</b> = false</td></tr>
<tr class="separator:adc6a08d1c4611535bc9527c8e2d4f75c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A barebones NMEA sentence datalogger build for the Adafruit Feather Adalogger Cortex-M0. </p>
<p>Feather32u4_gps_2_sd_node by Gerrit Motes, EMSSL NCSU, 7/12/19</p>
<p>Used to measure dGPS/GPS location data and write to a microSD card.</p>
<p>Uses the following hardware:</p><ul>
<li>Adafruit Feather Cortex-M0 Adalogger</li>
<li>Adafruit Ultimate GPS FeatherWing </li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae3f20a5a4f45810cd3223e55574a3bae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3f20a5a4f45810cd3223e55574a3bae">&#9670;&nbsp;</a></span>getGPS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getGPS </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The function that grabs new GPS sentences. </p>
<p>uses the .lastNMEA() method to grab an NMEA sentence in String form. It then prints the sentence to the serial monitor, writes it to SD memory, and syncronizes the SD card. It then clears the memory. </p>

</div>
</div>
<a id="ac7b58bc5521481efa29c71f98a6d5d2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7b58bc5521481efa29c71f98a6d5d2e">&#9670;&nbsp;</a></span>makeFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int makeFiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds unique filenames on the SD card and opens/assigns them to global File declarations. </p>
<p>Uses predefined const char filenames (e.g. GPSLOG05.TXT) and cycles through the last 2 digits from 00 to 99, checking for the existence of each file until a filename is found that doesn't alread exist. It then attempts to open that file. If successful, it assigns it to its respective global File object (e.g. GPSdata). </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
